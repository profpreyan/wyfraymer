<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Wyframer</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="top-bar">
    <div class="brand">Wyframer</div>
    <div class="top-bar-controls">
      <div class="screen-controls">
        <label for="screen-size">Screen size:</label>
        <select id="screen-size">
          <option value="375x667">Mobile (375 × 667)</option>
          <option value="768x1024">Tablet (768 × 1024)</option>
          <option value="1280x720" selected>Desktop (1280 × 720)</option>
          <option value="1440x900">Large Desktop (1440 × 900)</option>
          <option value="1920x1080">Full HD (1920 × 1080)</option>
          <option value="custom">Custom...</option>
        </select>
        <div class="custom-size" id="custom-size" hidden>
          <input type="number" id="custom-width" placeholder="Width" min="200" />
          <span>×</span>
          <input type="number" id="custom-height" placeholder="Height" min="200" />
          <button id="apply-custom" type="button">Apply</button>
        </div>
        <!-- <div class="current-size" id="current-size">1280 × 720</div> -->
      </div>
      <div class="screen-management">
        <label for="screen-select">Screen:</label>
        <select id="screen-select"></select>
        <button id="add-screen" class="icon-button" type="button" title="Add screen" aria-label="Add screen">
          <svg class="icon" viewBox="0 0 20 20" aria-hidden="true" focusable="false">
            <path d="M9 4a1 1 0 1 1 2 0v5h5a1 1 0 1 1 0 2h-5v5a1 1 0 1 1-2 0v-5H4a1 1 0 1 1 0-2h5z" />
          </svg>
          <span class="visually-hidden">Add screen</span>
        </button>
        <button id="duplicate-screen" class="icon-button" type="button" title="Duplicate current screen" aria-label="Duplicate current screen">
          <svg class="icon" viewBox="0 0 20 20" aria-hidden="true" focusable="false">
            <path d="M6 5a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v7h-2V5H8v2H6z" />
            <path d="M4 8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2z" />
          </svg>
          <span class="visually-hidden">Duplicate screen</span>
        </button>
        <button id="delete-screen" class="icon-button" type="button" title="Delete current screen" aria-label="Delete current screen">
          <svg class="icon" viewBox="0 0 20 20" aria-hidden="true" focusable="false">
            <path d="M7.22 6.47a.75.75 0 0 1 1.06 0L10 8.19l1.72-1.72a.75.75 0 0 1 1.06 1.06L11.06 9.25l1.72 1.72a.75.75 0 1 1-1.06 1.06L10 10.31l-1.72 1.72a.75.75 0 1 1-1.06-1.06l1.72-1.72-1.72-1.72a.75.75 0 0 1 0-1.06z" />
            <path d="M15 4h-3.5l-.44-.88A1 1 0 0 0 10.17 3H7a1 1 0 0 0-.9.56L5.7 5H4a1 1 0 1 0 0 2h11a1 1 0 1 0 0-2zM6 8h8v7a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V8z" />
          </svg>
          <span class="visually-hidden">Delete screen</span>
        </button>
      </div>
    </div>
    <div class="header-actions">
      <button id="preview-button" class="preview-button" type="button" aria-pressed="false">Preview</button>
      <button id="analysis-button" class="analysis-button" type="button" aria-pressed="false">Analysis</button>
      <button id="help-button" class="help-button icon-button" type="button" title="Help &amp; Tips" aria-label="Help &amp; Tips">
        <svg class="icon" viewBox="0 0 20 20" aria-hidden="true" focusable="false">
          <path d="M10 2a8 8 0 1 1 0 16A8 8 0 0 1 10 2zm0 2a6 6 0 1 0 0 12A6 6 0 0 0 10 4zm0 8a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm.12-7c1.4 0 2.38.84 2.38 2.03 0 .89-.44 1.48-1.4 2.07-.76.44-1.04.8-1.04 1.3V11h-1.5v-.72c0-1.02.54-1.66 1.39-2.16.74-.44.97-.74.97-1.16 0-.48-.38-.8-.95-.8-.58 0-.98.34-1.09.9l-1.46-.32C7.7 5.27 8.68 4 10.12 4z" />
        </svg>
        <span class="visually-hidden">Help &amp; Tips</span>
      </button>
    </div>
  </header>

  <main class="workspace">
    <aside class="palette">
      <h2>Components</h2>
      <div class="palette-items">
        <button class="palette-item" draggable="true" data-type="button" type="button">Button</button>
        <button class="palette-item" draggable="true" data-type="input" type="button">Input</button>
        <button class="palette-item" draggable="true" data-type="dropdown" type="button">Dropdown</button>
        <button class="palette-item" draggable="true" data-type="card" type="button">Card</button>
        <button class="palette-item" draggable="true" data-type="heading" type="button">Heading</button>
        <button class="palette-item" draggable="true" data-type="paragraph" type="button">Paragraph</button>
        <button class="palette-item" draggable="true" data-type="image" type="button">Image Placeholder</button>
        <button class="palette-item" draggable="true" data-type="text" type="button">Text</button>
        <button class="palette-item" draggable="true" data-type="radio-group" type="button">Radio Group</button>
        <button class="palette-item" draggable="true" data-type="slider" type="button">Slider</button>
      </div>

      <section class="link-panel" aria-labelledby="link-panel-title">
        <h3 id="link-panel-title">Interactions</h3>
        <div id="selection-bar" class="selection-bar inactive" aria-live="polite">
          <p id="selection-label" class="selection-summary">No element selected</p>
        </div>
        <div id="link-controls" class="link-controls" aria-live="polite">
          <label for="link-select">On click go to:</label>
          <div class="link-control-row">
            <select id="link-select">
              <option value="">No link</option>
            </select>
            <button id="clear-link" type="button">Clear</button>
          </div>
        </div>
      </section>
    </aside>

    <section class="canvas-wrapper">
      <div id="canvas-container" class="canvas-container" aria-live="polite"></div>
    </section>
  </main>

  <!-- <footer class="status-bar">
    <span>Basic wireframing canvas for early UX ideas.</span>
  </footer> -->

  <div id="modal-backdrop" class="modal-backdrop hidden" aria-hidden="true"></div>
  <div id="dialog-backdrop" class="modal-backdrop hidden" aria-hidden="true"></div>

  <div id="help-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="help-title">
    <div class="modal-header">
      <h2 id="help-title">Wyframer guide</h2>
      <button id="close-help" class="modal-close" type="button" aria-label="Close help">&times;</button>
    </div>
    <div class="modal-content">
      <p>Sketch user flows quickly:</p>
      <ul>
        <li>Drag components from the left palette onto the active screen.</li>
        <li>Click to select, then drag to reposition elements.</li>
        <li>Use the corner handles to resize components.</li>
        <li>Double-click text to edit labels and copy.</li>
        <li>Use Delete or Backspace to remove the selected element.</li>
        <li>Copy and paste with Ctrl/Cmd + C/V, or duplicate with Ctrl/Cmd + D.</li>
        <li>Elements snap to the ruler grid for tidy alignment.</li>
        <li>Create, duplicate, or delete screens to map end-to-end flows.</li>
        <li>Press Preview to experience the flow and follow screen links.</li>
      </ul>
    </div>
  </div>

  <div id="screen-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="screen-modal-title">
    <div class="modal-header">
      <h2 id="screen-modal-title">Screen settings</h2>
      <button id="screen-modal-close" class="modal-close" type="button" aria-label="Close dialog">&times;</button>
    </div>
    <form id="screen-modal-form" class="modal-content">
      <div id="screen-modal-body" class="modal-body"></div>
      <div class="modal-actions">
        <button id="screen-modal-cancel" class="button-secondary" type="button">Cancel</button>
        <button id="screen-modal-confirm" class="button-primary" type="submit">Confirm</button>
      </div>
    </form>
  </div>

  <div id="preview-backdrop" class="preview-backdrop hidden" aria-hidden="true">
    <div id="preview-modal" class="preview-modal" role="dialog" aria-modal="true" aria-labelledby="preview-title">
      <header class="preview-header">
        <h2 id="preview-title">Preview</h2>
        <div class="preview-tools">
          <label for="preview-screen-select">Screen:</label>
          <select id="preview-screen-select"></select>
        </div>
        <div class="preview-mode-toggle" role="group" aria-label="Preview mode">
          <button id="preview-mode-preview" class="mode-toggle-button active" type="button" data-mode="preview" aria-pressed="true">
            Preview
          </button>
          <button id="preview-mode-analysis" class="mode-toggle-button" type="button" data-mode="analysis" aria-pressed="false">
            Analysis
          </button>
        </div>
        <button id="preview-fullscreen" class="preview-fullscreen" type="button" aria-pressed="false" title="Enter fullscreen preview">
          Fullscreen
        </button>
        <button id="close-preview" class="preview-close" type="button" aria-label="Close preview">&times;</button>
      </header>
      <div class="preview-body">
        <aside id="analysis-panel" class="analysis-panel" hidden aria-live="polite">
          <div class="analysis-panel-header">
            <h3>Interaction heatmap</h3>
            <button id="analysis-reset" class="analysis-reset" type="button">Reset data</button>
          </div>
          <p id="analysis-panel-empty" class="analysis-panel-empty">
            Interact with the preview to see cursor trails and click hotspots.
          </p>
          <div id="analysis-summary-cards" class="analysis-summary-cards" hidden>
            <article class="analysis-summary-card">
              <div class="analysis-summary-icon" aria-hidden="true">&#128338;</div>
              <div class="analysis-summary-content">
                <span class="analysis-summary-value" id="analysis-average-session-time">0s</span>
                <span class="analysis-summary-label">Average Session Time</span>
              </div>
            </article>
            <article class="analysis-summary-card">
              <div class="analysis-summary-icon" aria-hidden="true">&#128433;</div>
              <div class="analysis-summary-content">
                <span class="analysis-summary-value" id="analysis-total-clicks">0</span>
                <span class="analysis-summary-label">Total Clicks</span>
              </div>
            </article>
            <article class="analysis-summary-card">
              <div class="analysis-summary-icon" aria-hidden="true">&#127919;</div>
              <div class="analysis-summary-content">
                <span class="analysis-summary-value" id="analysis-hotspot-clicks">0</span>
                <span class="analysis-summary-label">Hotspot Clicks</span>
              </div>
            </article>
          </div>
          <dl class="analysis-stats">
            <div class="analysis-stat">
              <dt>Cursor points</dt>
              <dd id="analysis-move-count">0</dd>
            </div>
            <div class="analysis-stat">
              <dt>Clicks</dt>
              <dd id="analysis-click-count">0</dd>
            </div>
          </dl>
          <section id="analysis-session-block" class="analysis-section" hidden>
            <header class="analysis-section-header">
              <label class="analysis-section-label" for="analysis-session-screen">Select screen for session analysis</label>
              <select id="analysis-session-screen"></select>
            </header>
            <div class="analysis-table-container">
              <table class="analysis-table">
                <thead>
                  <tr>
                    <th scope="col">Session #</th>
                    <th scope="col">Start Time</th>
                    <th scope="col">Duration</th>
                    <th scope="col">Total Clicks</th>
                    <th scope="col">Mouse Moves</th>
                    <th scope="col">Hotspot Clicks</th>
                    <th scope="col">Hotspot Hovers</th>
                    <th scope="col">Unique Hotspots</th>
                  </tr>
                </thead>
                <tbody id="analysis-session-table-body"></tbody>
              </table>
              <p id="analysis-session-empty" class="analysis-empty-message" hidden>No sessions recorded yet.</p>
            </div>
          </section>
          <section id="analysis-hotspot-block" class="analysis-section" hidden>
            <header class="analysis-section-header">
              <h4 class="analysis-section-title">Hotspot Performance Analysis</h4>
            </header>
            <div class="analysis-table-container">
              <table class="analysis-table">
                <thead>
                  <tr>
                    <th scope="col">Screen</th>
                    <th scope="col">Hotspot Name</th>
                    <th scope="col">Clicks</th>
                    <th scope="col">Hovers</th>
                    <th scope="col">Total Interactions</th>
                    <th scope="col">Unique Sessions</th>
                    <th scope="col">Session Rate</th>
                  </tr>
                </thead>
                <tbody id="analysis-hotspot-table-body"></tbody>
              </table>
              <p id="analysis-hotspot-empty" class="analysis-empty-message" hidden>No hotspot interactions yet.</p>
            </div>
          </section>
        </aside>
        <div id="preview-canvas-container" class="preview-stage"></div>
      </div>
    </div>
  </div>

  <div id="toast-container" class="toast-container" aria-live="polite" aria-atomic="true"></div>

  <script src="app.js"></script>
</body>
</html>
